alias ll="ls -lv --group-directories-first"

export PATH="$PATH:$HOME/Tools"


# Find a file with a pattern in name:
function ff() { find . -type f -iname '*'"$*"'*' -ls ; }

# Useful git aliases
alias glog="git log --oneline --graph"

# Fixes irritating problem with Dell XPS 15 wifi when coming back 
# from sleep
# This is a backup for the wifi_restart script in /lib/systemd/system-sleep
alias wififix="sudo service network-manager restart"

# Add in dev specific stuff
if [ -f ~/.dev ]; then
    source ~/.dev
fi

alias python=python3
alias vim="vim -p"

setopt pushdsilent

function remk 
{
    pushd ~/Tools/remarkable-linux-client-0.0.5-16-1408-g7eca2b66
    ./reMarkable.sh > remarkable.log 2>&1  &
    popd
}

alias todo="topydo -t ~/gdrive/todo/todo.txt -d ~/gdrive/todo/done.txt"
alias todopull="pushd ~/gdrive && drive pull -quiet todo && popd"
alias todopush="pushd ~/gdrive && drive push -quiet todo && popd"

export TODOTXT_DEFAULT_ACTION=ls

export GOPATH=$HOME/Tools/gopath
export PATH=$GOPATH:$GOPATH/bin:$PATH

# Kubernetes usefulness
eval $(kubectl completion zsh)
alias kubecpu="kubectl config use-context kube-a-dev-cpu-1222ed"
alias kubegpu="kubectl config use-context kube-a-dev-gpu-1222edmgmt"
alias kubestag="kubectl config use-context kube-b-staging-gpu-1222edmgmt"
alias kubeprod="kubectl config use-context kube-c-production-gpu-1222edmgmt"
alias kubectx="kubectl config current-context"

# Shells into a service on the current kubernetes cluster
function kubesh {
    local service=${1:?"Service name must be arg1"}
    kubectl exec -it $(kubectl get po | grep $service | awk '{ print $1 }') bash
}

function kubelog {
    local service=${1:?"Service name must be arg1"}
    shift
    if [[ $1 == -f ]]; then
        FOLLOW=-f
        shift
    fi

    kubectl logs $FOLLOW $(kubectl get po | grep $service | awk '{ print $1 }')
}
